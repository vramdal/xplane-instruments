var subject = require('./ws-udp-proxy');
var expect = require('chai').expect;

describe("Tester av ws-udp-proxy", () => {
    it('skal parse en DATA-melding', () => {
        let bytes = [0x44, 0x41, 0x54, 0x41, 0x40, 0x68, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3f, 0x00, 0x00, 0xe0, 0x40, 0x00, 0x00, 0x00, 0x00, 0x57, 0xe3, 0xa4, 0x38, 0x00, 0xc0, 0x79, 0xc4, 0x00, 0xc0, 0x79, 0xc4, 0x00, 0xc0, 0x79, 0xc4, 0x00, 0xc0, 0x79, 0xc4];
        let buffer = new Buffer(bytes);
        let msg = subject.parseDataMsg(buffer);
        expect(msg.ref).to.be.equal(104);
        expect(msg.floats[1]).to.be.equal(7);
        //expect(msg.floats[2]).to.be.equal(7);
    });
});